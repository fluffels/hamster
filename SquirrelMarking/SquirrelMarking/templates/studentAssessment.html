<!--Add javascript at menu bar -->
{% extends "base.html" %}

{% block title %}Squirrel Marking - Assessment View{% endblock %}

{% block menu_shortcuts %}
{% include "menu.html" %}
{% endblock %}

{% block content_title %}
	<h1 id="content_title">{{ C }} - Student Mark Assessment View</h1>
{% endblock %}
{% block includes %}
	<script type = "text/javascript">
	$(document).ready(function () {
	  assessId = $('#FilterAssessment').val();
	  alert(assessId);
	  if (assessId !== '')
	  {
	    displayAssessmentMarks($('#FilterAssessment').val());	    
	  }
	  $('#FilterAssessment').change(function()
	  {
	    assessId = $(this).val();
	    if (assessId !== '')
	      displayAssessmentMarks(assessId);
	  });
	});
	
	function displayAssessmentMarks(assessmentID)
	{
	  $.ajax({
	      type: 'POST',
	      url: '/getLeafAssessmentsTableWeb/',
	      data: {assess_id : assessmentID},
	     
	      }).success(function(response) {
		$("#markTable").replaceWith(response);		
	      });
	}
	</script>
{% endblock %}
{% block content %}
    <select id='FilterAssessment'>
      <option value="">Select Assessment</option>
      {% if Specific %}
	{% for Assessment in StudentAssessments %}
	  {% if Specific.id == Assessment.id %}
	    <option value="{{ Assessment.id }}" selected=''>{{ Assessment.assessment_name }}</option>
	  {% else %}
	    <option value="{{ Assessment.id }}">{{ Assessment.assessment_name }}</option>
	  {% endif %}
	{% endfor %}      
      {% else %}
      {% for Assessment in StudentAssessments %}
	<option value="{{ Assessment.id }}">{{ Assessment.assessment_name }}</option>
      {% endfor %}
      {% endif %}
    </select> 
    <form action='student/{{ C }}/{{ A }}'>
    <div id='markTable'>
    </div>
    
{% endblock %}