{% extends "web_interface/base_template.htm" %}

{% block title %} Modify Marks {% endblock %}

<!--###########################  Nav bar settings ############################-->

{% block logout_button %}
	<li><a href="/">Logout</a></li>
{% endblock %}
	
{% block person_details %}
	<li><a href="#" onclick="document.getElementById('details').submit(); return false" > <span class="glyphicon glyphicon-user"></span> </a></li>
	<form action="/User" id="details" method="post" hidden='hidden'>
	</form>
{% endblock %}

<!--###########################  End Nav bar settings ############################-->

<!--###########################  Courses dropdown ############################-->
<!-- Courses button -->
{% block courses_dropdown %}
{% for role in user_lect.0.LC %}
	<li><a id={{ role }} href="/course/{{ role }}"> {{ role }}</a></li>
{% endfor %}
<li class="divider"></li>
{% for role in user_stud.0.ST %}
	<li><a id={{ role }} href="/course/{{ role }}"> {{ role }}</a></li>
{% endfor %}
<li class="divider"></li>
{% for role in user_tut.0.TT %}
	<li><a id={{ role }} href="/course/{{ role }}"> {{ role }}</a></li>
{% endfor %}
<li class="divider"></li>
{% for role in user_ta.0.TA %}
	<li><a id={{ role }} href="/course/{{ role }}"> {{ role }}</a></li>
{% endfor %}
{% endblock %}
<!-- End of Courses button -->

<!-- Use as button -->
{% block courses_use_as %}
{% for role in user_roles %}
	<li><a id={{ role }}  href="/use_as/{{ role }}"> {{ role }}</a></li>
{% endfor %}
{% endblock %}
<!-- End of Use as button -->

<!--###########################  End Courses dropdown ############################-->


<!--###########################  jumbotron part ############################-->
{% block breadcrumbs %}
<ol class="breadcrumb">
	<li><a href="#">Login</a></li>
	<li ><a href="#">Home</a></li>
	<li class="active"><a href="#">Assessments</a></li>
</ol>
{% endblock %}


{% block jumbotron_header %}
	{{ assessmentName }} <span class="label label-default">{{ fullmark }}</span>	
{% endblock %}

{% block jumbotron_sub_header %} {{ module }} {% endblock %}

<!-- jumbotron content -->
{% block jumbotron_content %}

{% if message == None %}
	<!-- Do nothing no alert is required -->
{% else %}
	{% if message == 0 %}
		
		<div class="alert alert-danger alert-dismissible" role="alert">
			<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;
			</span><span class="sr-only">Close</span></button>
			<strong>Warning!</strong> The mark could not be updated, please try again.
		</div>
	{% elif message == 1 %}
	
		<div class="alert alert-success alert-dismissible" role="alert">
			<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;
			</span><span class="sr-only">Close</span></button>
			<strong>Success!</strong> The mark was updated successfully.
		</div>

	{% endif %}
		
{% endif %}

<div class="row">
	<div class="col-md-2"></div>
	<div class="col-md-8">
		<table class="table table-hover table-bordered">
			<tr>
				<td><strong> UserID </strong></td>
				<td><strong> Name </strong></td>
				<td><strong> Surname </strong></td>
				<td><strong> Mark obtained </strong></td>
			</tr>
			{% for per in studentMark %}
			<tr>
				<td> {{per.0}} </td>
				<td> {{per.1}} </td>
				<td> {{per.2}} </td>
				{% if per.3 < 0 %}
				<td class="col-md-3">
					<form method="post" action="/update_mark_marker" class="form-inline" role="form">
						<input type="number" class="form-control" placeholder="Mark awarded"  name="mark">
						<button type="submit" class="btn btn-success" >Submit  <span class="glyphicon glyphicon-ok"></span></button>
						<input hidden="hidden" name="assess_id" value={{ assess_id }}>
						<input hidden="hidden" name="uid" value={{ per.0 }}>
						<input hidden="hidden" name="mod" value={{ module }}>
						<input hidden="hidden" name="session" value={{ session }}>

					</form>
				</td>
				{% else %}
				<td class="col-md-3">
					<form  onsubmit='return to_submit({{ per.0 }});' class="form-inline" name={{ per.0 }} role="form" id="form_edit">
						<input id={{ per.0 }} disabled="disabled" type="number" class="form-control" placeholder="Mark awarded" value={{ per.3 }}>
						<button type="submit" class="btn btn-warning" id={{ per.0 }} >Edit  <span class="glyphicon glyphicon-edit"></span></button>
						<input hidden="hidden" name="assess_id" value={{ assess_id }}>
						<input hidden="hidden" name="uid" value={{ per.0 }}>
						<input hidden="hidden" name="mod" value={{ module }}>
						<input hidden="hidden" name="session" value={{ session }}>
					</form>
				</td>
				
				<script>
					function to_submit(stud_id) {
						alert(stud_id);
						var data_nyana = document.getElementById('form_edit').name;
						alert(data_nyana);
						var class_data = document.getElementById(data_nyana);
						alert(class_data.className);
						if (class_data.className == "btn btn-warning") {
							alert(data_nyana);
							class_data.className="btn btn-success";
							class_data.span.className="glyphicon glyphicon-ok"
							alert("changed button");
							document.getElementById(data_nyana).disabled=false;
							alert("editable");
							return false;
						}
						else{
							class_data.class="btn btn-warning";
							document.getElementById('edit_input').disabled=true;
							class_data.form.submit();
							
						}

					}
					
			       </script>
				{% endif %}
			</tr>
			{% endfor %}
		</table>
	</div>
	<div class="col-md-2"></div>
</div>

{% endblock %}
<!-- End of jumbotron content -->
<!--###########################  End of jumbotron part ############################-->


{% block left_under_jumbotron-col-6 %}{% endblock %}

{% block right_under_jumbotron-col-6 %}{% endblock %}